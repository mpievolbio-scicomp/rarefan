{% extends "base.html" %}
{% block head %}
    {{ dropzone.load_css() }}
    {{ dropzone.style('border: 2px dashed #0087F7; min-height: 100px; width: 66%') }}
{% endblock %}
{% block body %}
    <h1>Upload your sequences to RAREFAN</h1>
    <p>
    <b>
        Note:
    </b>
    RAREFAN accepts the following filename extensions (the part after the "."): ".fasta", ".fastn", ".fn", ".fna", ".fas" for
    DNA sequence data files; ".faa", "fa" for amino acid sequence files (RAYTs), and ".nwk" for newik formatted tree files.
    </p>
    <p>
    {{ dropzone.create(action=url_for('upload')) }}
    {{ dropzone.load_js() }}
    {{ dropzone.config(redirect_url=url_for('submit'), custom_options='addRemoveLinks: true, dictRemoveFileConfirmation: null') }}
    </p>
<script type="text/javascript">
    $(document).ready(function () {

        alert("success 1");
        console.log("3");

        Dropzone.options.myAwesomeDropzone = {

            success: function(file, response) {
                console.log("5");
                file.serverFileName = response.file_name;  // pass filename
            },
            removedfile: function (file, data) {  // triggered when remove file button was clicked
                $.ajax({  // send AJAX request to Flask to remove file
                    type:'POST',
                    url:'/deletefile',
                    data : {"filename" : file.serverFileName},  // pass filename
                    success : function (data) {
                        alert('File removed from server.')
                    }
                });
            }
        };
    });
</script>
{%  endblock %}
